---
title: "arg2"
---
```{r setup, include=FALSE}
library(tidyverse)
```
```{r}
simulation <- function() {
  action <- function() {
    empty <- is.na(slots[focused_feature])
    if (empty) {
      visible <- revealed[focused_feature]
      if (visible) {
        long <- monster[focused_feature] == 'long'
        if (long) {
          slots[[focused_feature]] <<- monster
        }
      } else {
          ## query the focused_feature => reveal it
          revealed[focused_feature] <<- TRUE
          query_counter <<- query_counter + 1
          action()
      }
    }
  }
  query_counter <- 0
  slots <- list(A = NA, B = NA)
  slots_need_to_be_filled <- TRUE
  while (slots_need_to_be_filled) {
    ## sample a monster
    monster <- c(A = sample(c('long', 'short'), 1), B = sample(c('long', 'short'), 1))
    revealed <- c(A = FALSE, B = FALSE)
    focused_feature_sequence <- sample(c('A', 'B'))
    focused_feature <- focused_feature_sequence[1]
    action()
    focused_feature <- focused_feature_sequence[2]
    action()
    slots_need_to_be_filled <- is.na(slots$A) || is.na(slots$B)
  }
  query_counter
}
simulation()
```
```{r}
replicate(10, simulation())
```


